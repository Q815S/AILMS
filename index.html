<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Vercelê³¼ Gemini í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: sans-serif; container-type: inline-size; }
        .container { max-width: 600px; margin: 40px auto; padding: 20px; }
        textarea { width: 95%; min-height: 80px; margin-bottom: 10px; padding: 10px; }
        button { padding: 10px 20px; }
        #result { margin-top: 20px; padding: 15px; background-color: #f0f0f0; border-radius: 5px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ê°„ë‹¨í•œ Gemini í…ŒìŠ¤íŠ¸</h1>
        <p>ê¶ê¸ˆí•œ ê²ƒì„ ë¬¼ì–´ë³´ì„¸ìš”. Vercel ì„œë²„ë¥¼ í†µí•´ Geminiê°€ ë‹µë³€í•´ì¤ë‹ˆë‹¤.</p>
        
        <textarea id="question-input" placeholder="ì˜ˆ: í•œêµ­ì˜ ìˆ˜ë„ëŠ” ì–´ë””ì•¼?"></textarea>
        <button id="ask-button">ì§ˆë¬¸í•˜ê¸°</button>

        <h2>ë‹µë³€:</h2>
        <div id="result">ì•„ì§ ë‹µë³€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
    </div>

    <script>
        const questionInput = document.getElementById('question-input');
        const askButton = document.getElementById('ask-button');
        const resultDiv = document.getElementById('result');

        // 'ì§ˆë¬¸í•˜ê¸°' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹¤í–‰
        askButton.addEventListener('click', async () => {
            const question = questionInput.value;
            if (!question) {
                alert('ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì‚¬ìš©ìì—ê²Œ ëŒ€ê¸° ì¤‘ì„ì„ ì•Œë¦¼
            resultDiv.textContent = 'ë‹µë³€ì„ ìƒì„±í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.';
            askButton.disabled = true;

            try {
                // ğŸ”½ ìš°ë¦¬ Vercel ì„œë²„ì˜ API(/api/ask)ë¡œ ìš”ì²­ì„ ë³´ëƒ„
                const response = await fetch('/api/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ question: question }) // ì§ˆë¬¸ì„ JSON í˜•íƒœë¡œ ì„œë²„ì— ì „ë‹¬
                });

                if (!response.ok) {
                    throw new Error('ì„œë²„ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }

                const data = await response.json();
                resultDiv.textContent = data.answer; // ì„œë²„ê°€ ë³´ë‚´ì¤€ ë‹µë³€ì„ í™”ë©´ì— í‘œì‹œ

            } catch (error) {
                resultDiv.textContent = 'ì˜¤ë¥˜: ' + error.message;
            } finally {
                askButton.disabled = false; // ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
            }
        });
    </script>
</body>
</html>